# 비동기 멀티쓰레드 기반 아이템 분류 시스템 (Minecraft Plugin)

마인크래프트 내에서 아이템을 상자에 넣으면  
**각 분류기(광물, 나무 등)가 멀티쓰레드로 아이템을 동시에 처리하는 시스템**을 구현했습니다.

---

## 핵심 기능 요약

- `/box` 명령어를 통해 아이템 상자 열기
- GUI에 아이템을 넣고 닫으면 자동으로 분류 시작
- 아이템은 **비동기 큐**에 들어가고,  
  **각 Thread(분류기)** 가 분류를 처리함
- 모든 분류가 끝나면, 총 처리 결과와 소요 시간을 채팅창에 출력

---

## 기술 요소

- `Thread` 클래스 직접 상속 → 멀티쓰레드 구현
- `LinkedBlockingQueue<ItemStack>` → 비동기 큐
- `CountDownLatch` → 모든 분류기 완료 기다리기
- `AtomicInteger` → 쓰레드 안전한 수 세기
- `InventoryCloseEvent` → GUI 제출 감지

---


---

## 힘들었던 점

### 1. **멀티쓰레드와 비동기의 개념 차이**

처음에는 단순히 `Thread`만 쓰면 **동시 처리**가 되고  
결과도 바로 나올 줄 알았다.

하지만 내가 만든 구조는 **비동기 큐 기반**이라  
→ 작업은 나중에 처리되고  
→ 결과도 나중에 도착함

**멀티쓰레드 = 동시에 실행**  
**비동기 = 결과를 나중에 받음**

> 이 차이를 직접 겪으며 처음으로 “개념이 아니라 진짜 경험으로” 이해하게 됐다.

---

### 2. **완료 시점을 잡는 게 가장 어려웠다**

처리 완료 메시지를 **큐가 비었을 때 출력**하려 했지만,  
- 큐는 일시적으로 비었다가 다시 찰 수도 있고  
- 여러 요청이 겹치면 `onComplete()`가 중복 호출될 수 있었다.

→ 결국 **CountDownLatch**로 구조를 바꿔,  
**모든 분류기가 스스로 "끝났어요" 신호를 보내게** 하고  
메인에서 기다리는 방식으로 해결했다.

---

### 3. **내가 원했던 건 '결과가 바로 오는 구조'였다**

> 나는 “동시에 처리되길” 원했지,  
> “나중에 결과가 오는 구조”를 원한 게 아니었다.

하지만 자연스럽게 비동기 큐 기반이 되면서  
→ 처리 완료 메시지가 늦게 오는 구조가 되어  
→ 사용자가 보기엔 응답이 늦은 것처럼 보였고  
→ 멀티쓰레드와 비동기의 차이를 실감했다.

---

## 배운 점 정리

| 항목 | 배운 내용 |
|------|-----------|
| 멀티쓰레드 | 여러 작업을 동시에 실행할 수 있다 (`Thread`) |
| 비동기 | 작업을 맡겨두고, 결과는 나중에 받는 구조 (queue + run) |
| 동기 제어 | `CountDownLatch`로 전체 작업 완료를 기다릴 수 있다 |
| 안전한 값 추적 | `AtomicInteger`로 각 쓰레드의 처리 수를 안전하게 추적 가능 |
| 책임 분리 | Controller는 요청만, Service가 로직 처리, Thread는 작업만 담당해야 유지보수에 유리 |

---

## 앞으로 확장할 수 있는 방향

- 분류기 카테고리 확장 (음식, 몬스터 전리품 등)
- 처리 도중 GUI 애니메이션 추가
- 아이템 분류 결과를 JSON 또는 MySQL 저장 (옵션)

## 마무리

이 프로젝트를 통해  
“멀티쓰레드”, “비동기”, “큐 처리”, “동기화”라는 개념들을  
**실전에서 부딪히고, 체감하고, 해결해가며 학습**할 수 있었습니다.

멀티쓰레드를 단순히 배우는 걸 넘어서  
**내가 원하는 흐름을 만들기 위해 어떻게 구조를 설계해야 하는지**까지 고민해 본 값진 경험이었어요.
